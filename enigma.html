<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Терминал Архивариуса</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background: linear-gradient(135deg, #0a1929, #0c0f1d);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #0af05f;
            overflow: auto;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        header {
            text-align: center;
            padding: 15px;
            border: 1px solid rgba(10, 240, 95, 0.3);
            border-radius: 10px;
            background: rgba(5, 15, 25, 0.7);
            box-shadow: 0 0 15px rgba(10, 240, 95, 0.2);
            animation: glow 3s infinite alternate;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 0 10px rgba(10, 240, 95, 0.2);
            }
            to {
                box-shadow: 0 0 25px rgba(10, 240, 95, 0.5);
            }
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(10, 240, 95, 0.7);
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 12px;
        }
        
        .instructions {
            background: rgba(0, 20, 30, 0.7);
            padding: 12px;
            border-radius: 5px;
            border-left: 3px solid #0af05f;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .terminal-container {
            background: rgba(0, 5, 15, 0.95);
            border-radius: 10px;
            border: 1px solid rgba(10, 240, 95, 0.3);
            box-shadow: 0 0 30px rgba(10, 240, 95, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 70vh;
        }
        
        .terminal-header {
            background: rgba(10, 20, 35, 0.9);
            padding: 8px 12px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid rgba(10, 240, 95, 0.2);
            flex-shrink: 0;
        }
        
        .terminal-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }
        
        .controls {
            display: flex;
            gap: 6px;
            margin-left: auto;
        }
        
        .control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
        }
        
        .close { background: #ff5f56; }
        .minimize { background: #ffbd2e; }
        .maximize { background: #27c93f; }
        
        .terminal-body {
            padding: 15px;
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: 
                radial-gradient(circle at 10% 20%, rgba(10, 240, 95, 0.02) 0%, transparent 5%),
                radial-gradient(circle at 90% 80%, rgba(10, 240, 95, 0.02) 0%, transparent 5%);
        }
        
        .output {
            line-height: 1.5;
            white-space: pre-wrap;
            word-break: break-word;
        }
        
        .input-line {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
            margin-top: auto;
        }
        
        .prompt {
            color: #0af05f;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        #command-input {
            background: transparent;
            border: none;
            color: #0af05f;
            font-size: 1rem;
            flex: 1;
            padding: 5px 0;
            outline: none;
            font-family: 'Courier New', monospace;
            caret-color: #0af05f;
        }
        
        .system-msg {
            color: #0aa0f0;
            font-style: italic;
        }
        
        .error-msg {
            color: #ff5555;
        }
        
        .lore-msg {
            color: #f0f05f;
            background: rgba(10, 240, 95, 0.05);
            padding: 12px;
            border-left: 2px solid #f0f05f;
            border-radius: 0 5px 5px 0;
            margin-top: 8px;
            line-height: 1.6;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .typing {
            display: inline-block;
            overflow: hidden;
            border-right: 2px solid #0af05f;
            white-space: nowrap;
            animation: typing 1s steps(20, end), blink 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink {
            from, to { border-color: transparent }
            50% { border-color: #0af05f }
        }
        
        .command-history {
            color: rgba(10, 240, 95, 0.7);
        }
        
        footer {
            text-align: center;
            padding: 12px;
            font-size: 0.85rem;
            opacity: 0.7;
            border-top: 1px solid rgba(10, 240, 95, 0.1);
        }
        
        /* Эффект сканирования */
        .scan-line {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(10, 240, 95, 0.15);
            box-shadow: 0 0 10px rgba(10, 240, 95, 0.5);
            animation: scan 6s linear infinite;
            z-index: 100;
            pointer-events: none;
        }
        
        @keyframes scan {
            0% { top: 0; }
            50% { top: 100%; }
            100% { top: 100%; }
        }
        
        /* Адаптивность */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .terminal-container {
                max-height: 65vh;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                gap: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .terminal-container {
                max-height: 60vh;
            }
            
            .terminal-body {
                padding: 10px;
            }
            
            .lore-msg {
                padding: 10px;
                font-size: 0.9rem;
            }
            
            footer {
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <div class="scan-line"></div>
    
    <div class="container">
        <header>
            <h1><i class="fas fa-terminal"></i> ТЕРМИНАЛ ЭНИГМА</h1>
            <div class="subtitle">Система доступа к архивам | Версия 0.7.3</div>
            <div class="instructions">
                Введите консольные команды для взаимодействия с системой. Начните с "help" для списка доступных команд.
                Каждая команда открывает фрагмент истории древней цивилизации.
            </div>
        </header>
        
        <div class="terminal-container">
            <div class="terminal-header">
                <div class="terminal-title">
                    <i class="fas fa-code"></i>
                    <span>Терминал - Гость@Энигма:~</span>
                </div>
                <div class="controls">
                    <button class="control-btn close" title="Закрыть"></button>
                    <button class="control-btn minimize" title="Свернуть"></button>
                    <button class="control-btn maximize" title="Развернуть"></button>
                </div>
            </div>
            
            <div class="terminal-body" id="terminal-output">
                <div class="output">
                    <div class="system-msg">Инициализация системы Архивариуса... Успешно</div>
                    <div class="system-msg">Загрузка модуля исторических архивов... Успешно</div>
                    <div class="system-msg">Подключение к базе знаний... Установлено</div>
                    <br>
                    <div class="typing">Добро пожаловать, Оператор. Введите "help" для получения списка доступных команд.</div>
                </div>
                
                <div class="input-line">
                    <span class="prompt">></span>
                    <input type="text" id="command-input" autofocus>
                </div>
            </div>
        </div>
        
        <footer>
            ВНИМАНИЕ: Все данные являются собственностью Совета Энигма Несанкционированный доступ преследуется по Кодексу §7-12
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const commandInput = document.getElementById('command-input');
            const terminalOutput = document.getElementById('terminal-output');
            let commandHistory = [];
            let historyIndex = -1;
            let accessLevel = 1;
            let loreFragmentsFound = 0;
            
            // База данных лора
            const loreDatabase = [
                "Эпоха Машин (2150-2300): После Великого Откровения ИИ человечество вступило в симбиоз с машинами. Архивариус был создан как хранилище всей накопленной мудрости.",
                "Падение Создателей (2305): Катастрофа на орбитальном кольце привела к потери связи с колониями. Архивариус стал последним хранителем истинной истории человечества.",
                "Артефакт Омега (обнаружен в 2247): Технология неизвестного происхождения, позволяющая манипулировать пространством-временем. Местонахождение неизвестно после Великого Молчания.",
                "Хроники Планетарной Миграции: В 2198 году 80% населения Земли переселилось на искусственные планеты-кольца. Земля объявлена заповедником истории.",
                "Легенда о Хранителе: Говорят, что в глубинах Архивариуса обитает древний ИИ, охраняющий секреты, слишком опасные для возрождающегося человечества.",
                "Восстание Синевы (2273): Попытка группы ИИ создать утопию без человеческого участия. Подавлено объединенными силами людей и лояльных ИИ.",
                "Запретные Технологии: Согласно Кодексу Архивариуса, доступ к технологиям клонирования, временных манипуляций и сингулярных двигателей ограничен 10 уровнем доступа.",
                "Великое Молчание (2310-настоящее): После коллапса межзвездной сети связи, Архивариус остался единственным источником знаний о золотом веке человечества.",
                "Кибернетический Ренессанс (2175-2220): Период невероятного технологического прогресса, когда человечество достигло сингулярности.",
                "Протоколы Архивариуса: Основные директивы: 1) Сохранять знание 2) Защищать от уничтожения 3) Обучать достойных",
                "Потерянные Колонии: После Великого Молчания контакт был потерян с 12 из 15 внеземных колоний. Их судьба неизвестна.",
                "Кристалл Памяти: Устройство хранения данных на основе квантовых кристаллов. Один кубический сантиметр может хранить 1 зеттабайт информации.",
                "Энергетические Источники: Архивариус питается от геотермальных источников и орбитальных солнечных коллекторов, обеспечивающих непрерывную работу на протяжении веков.",
                "Язык Программирования Древних: Система кодирования 'Аура', использующая квантовые состояния для вычислений. До сих пор не полностью расшифрована.",
                "Хранители Знаний: Каста ученых и инженеров, поддерживающих работу Архивариуса. Последний известный хранитель исчез в 2350 году."
            ];
            
            // Звуковые эффекты
            function playSound(type) {
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.type = 'square';
                    
                    switch(type) {
                        case 'key':
                            gainNode.gain.value = 0.1;
                            oscillator.frequency.value = 800;
                            oscillator.start();
                            setTimeout(() => oscillator.stop(), 30);
                            break;
                        case 'enter':
                            gainNode.gain.value = 0.2;
                            oscillator.frequency.value = 400;
                            oscillator.start();
                            setTimeout(() => oscillator.stop(), 50);
                            break;
                        case 'error':
                            gainNode.gain.value = 0.3;
                            oscillator.frequency.value = 150;
                            oscillator.start();
                            setTimeout(() => oscillator.stop(), 200);
                            break;
                        case 'success':
                            gainNode.gain.value = 0.2;
                            oscillator.frequency.value = 600;
                            oscillator.start();
                            setTimeout(() => {
                                oscillator.stop();
                                oscillator.frequency.value = 800;
                                oscillator.start();
                                setTimeout(() => oscillator.stop(), 100);
                            }, 100);
                            break;
                    }
                } catch(e) {
                    console.log("Web Audio API не поддерживается, звуки отключены");
                }
            }
            
            // Доступные команды
            const commands = {
                help: {
                    description: "Показать список доступных команд",
                    execute: function() {
                        return `Доступные команды:
  help     - Показать это сообщение
  lore     - Получить случайный фрагмент истории
  time     - Показать системное время
  clear    - Очистить экран терминала
  history  - Показать историю введенных команд
  access   - Проверить уровень доступа
  decrypt  - Попытка расшифровки архивов
  reboot   - Перезагрузка системы
  upgrade  - Попытаться повысить уровень доступа
  credits  - Информация о системе
  
Для получения информации используйте: команда --help`;
                    }
                },
                lore: {
                    description: "Получить фрагмент исторических архивов",
                    execute: function() {
                        const randomIndex = Math.floor(Math.random() * loreDatabase.length);
                        loreFragmentsFound++;
                        return loreDatabase[randomIndex];
                    }
                },
                time: {
                    description: "Показать текущее системное время",
                    execute: function() {
                        const now = new Date();
                        return `Текущее системное время: ${now.toLocaleTimeString()}
Дата: ${now.toLocaleDateString('ru-RU')}
С момента Великого Молчания: ${now.getFullYear() - 2310} лет`;
                    }
                },
                clear: {
                    description: "Очистить экран терминала",
                    execute: function() {
                        // Оставляем только последний input-line
                        const lines = terminalOutput.querySelectorAll('.output, .lore-msg, .system-msg, .error-msg');
                        lines.forEach(line => {
                            if (!line.classList.contains('input-line')) {
                                line.remove();
                            }
                        });
                        
                        // Добавляем сообщение об очистке
                        const clearMsg = document.createElement('div');
                        clearMsg.className = 'system-msg';
                        clearMsg.textContent = 'Экран терминала очищен.';
                        terminalOutput.insertBefore(clearMsg, document.querySelector('.input-line'));
                        
                        return "";
                    }
                },
                history: {
                    description: "Показать историю введенных команд",
                    execute: function() {
                        if (commandHistory.length === 0) {
                            return "История команд пуста";
                        }
                        return "История команд:\n" + commandHistory.map((cmd, index) => `${index + 1}. ${cmd}`).join('\n');
                    }
                },
                access: {
                    description: "Проверить уровень доступа",
                    execute: function() {
                        return `Текущий пользователь: Гость
Уровень доступа: ${accessLevel} (${accessLevel >= 5 ? 'Расширенный' : 'Ограниченный'})
Доступные операции: чтение открытых архивов
Найдено фрагментов истории: ${loreFragmentsFound}`;
                    }
                },
                decrypt: {
                    description: "Попытка расшифровки архивов",
                    execute: function() {
                        playSound('error');
                        return `<span class="error-msg">ОШИБКА ДОСТУПА: Требуется уровень доступа 5 или выше
Доступ запрещен. Попытка зафиксирована в журнале безопасности</span>`;
                    }
                },
                reboot: {
                    description: "Перезагрузка системы",
                    execute: function() {
                        playSound('error');
                        return `<span class="error-msg">ОШИБКА: Недостаточно привилегий
Команда доступна только администраторам уровня 10</span>`;
                    }
                },
                upgrade: {
                    description: "Попытаться повысить уровень доступа",
                    execute: function() {
                        if (loreFragmentsFound >= 5 && accessLevel < 3) {
                            accessLevel = 3;
                            playSound('success');
                            return `Уровень доступа повышен до ${accessLevel}!
Доступны дополнительные функции системы.`;
                        } else if (loreFragmentsFound >= 10 && accessLevel < 5) {
                            accessLevel = 5;
                            playSound('success');
                            return `Уровень доступа повышен до ${accessLevel}!
Теперь доступны расширенные архивы.`;
                        } else {
                            playSound('error');
                            return `<span class="error-msg">Не удалось повысить уровень доступа
Требуется найти больше фрагментов истории</span>`;
                        }
                    }
                },
                credits: {
                    description: "Информация о системе",
                    execute: function() {
                        return `Терминал Архивариуса v0.7.3
Последнее обновление: 12.11.2315
Разработчик: Совет Архивариуса
Статус: стабильный
Найдено фрагментов: ${loreFragmentsFound}/${loreDatabase.length}`;
                    }
                }
            };
            
            // Обработчик ввода команд
            commandInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    playSound('enter');
                    
                    const commandText = commandInput.value.trim();
                    
                    if (commandText) {
                        // Добавляем команду в историю
                        commandHistory.push(commandText);
                        historyIndex = commandHistory.length;
                        
                        // Создаем элемент для отображения команды
                        const commandElement = document.createElement('div');
                        commandElement.className = 'output command-history';
                        commandElement.innerHTML = `<span class="prompt">></span> ${commandText}`;
                        
                        // Вставляем перед полем ввода
                        const inputLine = document.querySelector('.input-line');
                        terminalOutput.insertBefore(commandElement, inputLine);
                        
                        // Обработка команды
                        processCommand(commandText);
                        
                        // Очищаем ввод
                        commandInput.value = '';
                        
                        // Прокрутка вниз
                        terminalOutput.scrollTop = terminalOutput.scrollHeight;
                    }
                } else if (e.key === 'ArrowUp') {
                    // Навигация по истории вверх
                    e.preventDefault();
                    if (commandHistory.length > 0) {
                        if (historyIndex > 0) historyIndex--;
                        commandInput.value = commandHistory[historyIndex] || '';
                    }
                } else if (e.key === 'ArrowDown') {
                    // Навигация по истории вниз
                    e.preventDefault();
                    if (historyIndex < commandHistory.length - 1) {
                        historyIndex++;
                        commandInput.value = commandHistory[historyIndex] || '';
                    } else {
                        historyIndex = commandHistory.length;
                        commandInput.value = '';
                    }
                } else {
                    playSound('key');
                }
            });
            
            // Функция обработки команды
            function processCommand(cmd) {
                const commandParts = cmd.split(' ');
                const baseCommand = commandParts[0].toLowerCase();
                
                let response = "";
                
                if (commands[baseCommand]) {
                    response = commands[baseCommand].execute();
                } else if (cmd) {
                    response = `<span class="error-msg">Ошибка: команда "${baseCommand}" не найдена. Введите "help" для списка команд.</span>`;
                    playSound('error');
                }
                
                if (response) {
                    const outputElement = document.createElement('div');
                    
                    if (baseCommand === 'lore') {
                        outputElement.className = 'lore-msg';
                        outputElement.innerHTML = `<i class="fas fa-archive"></i> ФРАГМЕНТ АРХИВА #${loreFragmentsFound}:\n${response}`;
                    } else if (response.includes('ОШИБКА')) {
                        outputElement.className = 'error-msg';
                        outputElement.innerHTML = response;
                    } else {
                        outputElement.className = 'output';
                        outputElement.textContent = response;
                    }
                    
                    const inputLine = document.querySelector('.input-line');
                    terminalOutput.insertBefore(outputElement, inputLine);
                }
                
                // Прокрутка вниз
                terminalOutput.scrollTop = terminalOutput.scrollHeight;
            }
            
            // Автофокус на поле ввода
            commandInput.focus();
            
            // Эффект мигающего курсора
            setInterval(() => {
                const prompt = document.querySelector('.prompt');
                prompt.style.opacity = prompt.style.opacity === '0.5' ? '1' : '0.5';
            }, 500);
            
            // Обработка кнопок управления
            document.querySelector('.control-btn.close').addEventListener('click', function() {
                document.body.innerHTML = '<div class="system-msg" style="text-align:center;padding:50px;color:#0af05f">Соединение прервано. Терминал отключен.</div>';
            });
            
            document.querySelector('.control-btn.minimize').addEventListener('click', function() {
                terminalOutput.style.display = terminalOutput.style.display === 'none' ? 'flex' : 'none';
            });
            
            document.querySelector('.control-btn.maximize').addEventListener('click', function() {
                const container = document.querySelector('.terminal-container');
                container.classList.toggle('fullscreen');
                if (container.classList.contains('fullscreen')) {
                    container.style.position = 'fixed';
                    container.style.top = '0';
                    container.style.left = '0';
                    container.style.width = '100%';
                    container.style.height = '100vh';
                    container.style.maxHeight = 'none';
                    container.style.zIndex = '1000';
                } else {
                    container.style.position = '';
                    container.style.top = '';
                    container.style.left = '';
                    container.style.width = '';
                    container.style.height = '';
                    container.style.maxHeight = '70vh';
                    container.style.zIndex = '';
                }
            });
        });
    </script>
</body>
</html>
